<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;6.&nbsp;API</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Git as Subversion"><link rel="up" href="index.html" title="Git as Subversion"><link rel="prev" href="ch_props.html" title="Chapter&nbsp;5.&nbsp;SVN Properties"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter&nbsp;6.&nbsp;API</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch_props.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;</td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d5e487"></a>Chapter&nbsp;6.&nbsp;API</h1></div></div></div>
  

  <div class="mediaobject"><img src="images/rpc_annotation_en_US.png"><div class="caption">
      <p><a class="ulink" href="http://xkcd.ru/927/" target="_top">https://xkcd.com/927/</a></p>
    </div></div>

  <div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e495"></a>Interface description</h2></div></div></div>
    

    <p>API is implemented according to the following requirements:</p>

    <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
        <p>Schema-first API definition.</p>

        <p>This allows the use schema as the documentation, and in some cases, to generate the code for the work with the API.</p>
      </li><li class="listitem">
        <p>Client implementation must be trivial on any programming language.</p>
      </li></ul></div>

    <p>As a result, for API scheme has been choosen Protocol Buffers (<a class="ulink" href="https://developers.google.com/protocol-buffers/" target="_top">https://developers.google.com/protocol-buffers/</a>).</p>

    <p>Since Protocol Buffers does not have a native RPC implemenation, used custom RPC implementation based on HTTP protocol.</p>

    <p>To call the method, a request is sent to a URL of the form:</p>

    <p><code class="code">http://somehost/&lt;repository&gt;/&lt;service&gt;/&lt;method&gt;.&lt;format&gt;</code></p>

    <p>Wherein:</p>

    <div class="variablelist"><dl class="variablelist"><dt><span class="term">&lt;repository&gt;</span></dt><dd>
          <p>The name of the repository, for which the method is called API.</p>

          <p>Don't used for server-wide API.</p>
        </dd><dt><span class="term">&lt;service&gt;</span></dt><dd>
          <p>Lower case service name from .proto file.</p>
        </dd><dt><span class="term">&lt;method&gt;</span></dt><dd>
          <p>Lower case method name from .proto file.</p>
        </dd><dt><span class="term">&lt;format&gt;</span></dt><dd>
          <p>Message serialization format.</p>

          <p>Supported formats:</p>

          <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
              <p><span class="token">bin</span>
              (<span class="type">application/x-protobuf</span>)</p>

              <p>Binary Protocol Buffers serialization.</p>
            </li><li class="listitem">
              <p><span class="token">json</span>
              (<span class="type">application/json</span>)</p>

              <p>JSON serialization. Allows to implement API without Protocol Buffers library.</p>
            </li><li class="listitem">
              <p><span class="token">xml</span>
              (<span class="type">application/xml</span>)</p>

              <p>XML serialization. Allows to implement API without Protocol Buffers library.</p>
            </li><li class="listitem">
              <p><span class="token">txt</span>
              (<span class="type">text/plain</span>)</p>

              <p>Text serialization. It useful for invoke some methods from Internet browser.</p>
            </li></ul></div>
        </dd></dl></div>

    <p>The RPC-call argument may be transmitted via POST-request body.</p>

    <p>Scalar top-level attributes also can be passed via URL parameters.</p>
  </div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch_props.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;</td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;5.&nbsp;SVN Properties&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>